{"ast":null,"code":"/**\r\n    * @license\r\n    * Copyright 2019 Google LLC. All Rights Reserved.\r\n    * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    * you may not use this file except in compliance with the License.\r\n    * You may obtain a copy of the License at\r\n    *\r\n    * http://www.apache.org/licenses/LICENSE-2.0\r\n    *\r\n    * Unless required by applicable law or agreed to in writing, software\r\n    * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    * See the License for the specific language governing permissions and\r\n    * limitations under the License.\r\n    * =============================================================================\r\n    */\nimport * as tf from \"@tensorflow/tfjs-core\";\nimport { tidy, div, util, Tensor, browser, pad3d, scalar, concat, tensor2d } from \"@tensorflow/tfjs-core\";\nimport { loadGraphModel } from \"@tensorflow/tfjs-converter\";\n\nvar extendStatics = function (e, t) {\n  return (extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (e, t) {\n    e.__proto__ = t;\n  } || function (e, t) {\n    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);\n  })(e, t);\n};\n\nfunction __extends(e, t) {\n  function n() {\n    this.constructor = e;\n  }\n\n  extendStatics(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n());\n}\n\nvar __assign = function () {\n  return (__assign = Object.assign || function (e) {\n    for (var t, n = 1, r = arguments.length; n < r; n++) for (var o in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);\n\n    return e;\n  }).apply(this, arguments);\n};\n\nfunction __awaiter(e, t, n, r) {\n  return new (n || (n = Promise))(function (o, i) {\n    function s(e) {\n      try {\n        a(r.next(e));\n      } catch (e) {\n        i(e);\n      }\n    }\n\n    function u(e) {\n      try {\n        a(r.throw(e));\n      } catch (e) {\n        i(e);\n      }\n    }\n\n    function a(e) {\n      e.done ? o(e.value) : new n(function (t) {\n        t(e.value);\n      }).then(s, u);\n    }\n\n    a((r = r.apply(e, t || [])).next());\n  });\n}\n\nfunction __generator(e, t) {\n  var n,\n      r,\n      o,\n      i,\n      s = {\n    label: 0,\n    sent: function () {\n      if (1 & o[0]) throw o[1];\n      return o[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return i = {\n    next: u(0),\n    throw: u(1),\n    return: u(2)\n  }, \"function\" == typeof Symbol && (i[Symbol.iterator] = function () {\n    return this;\n  }), i;\n\n  function u(i) {\n    return function (u) {\n      return function (i) {\n        if (n) throw new TypeError(\"Generator is already executing.\");\n\n        for (; s;) try {\n          if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o;\n\n          switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) {\n            case 0:\n            case 1:\n              o = i;\n              break;\n\n            case 4:\n              return s.label++, {\n                value: i[1],\n                done: !1\n              };\n\n            case 5:\n              s.label++, r = i[1], i = [0];\n              continue;\n\n            case 7:\n              i = s.ops.pop(), s.trys.pop();\n              continue;\n\n            default:\n              if (!(o = (o = s.trys).length > 0 && o[o.length - 1]) && (6 === i[0] || 2 === i[0])) {\n                s = 0;\n                continue;\n              }\n\n              if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {\n                s.label = i[1];\n                break;\n              }\n\n              if (6 === i[0] && s.label < o[1]) {\n                s.label = o[1], o = i;\n                break;\n              }\n\n              if (o && s.label < o[2]) {\n                s.label = o[2], s.ops.push(i);\n                break;\n              }\n\n              o[2] && s.ops.pop(), s.trys.pop();\n              continue;\n          }\n\n          i = t.call(e, s);\n        } catch (e) {\n          i = [6, e], r = 0;\n        } finally {\n          n = o = 0;\n        }\n\n        if (5 & i[0]) throw i[1];\n        return {\n          value: i[0] ? i[1] : void 0,\n          done: !0\n        };\n      }([i, u]);\n    };\n  }\n}\n\nvar BaseModel = function () {\n  function e(e, t) {\n    this.model = e, this.outputStride = t;\n    var n = this.model.inputs[0].shape;\n    util.assert(-1 === n[1] && -1 === n[2], function () {\n      return \"Input shape [\" + n[1] + \", \" + n[2] + \"] must both be equal to or -1\";\n    });\n  }\n\n  return e.prototype.predict = function (e) {\n    var t = this;\n    return tidy(function () {\n      var n = t.preprocessInput(e.toFloat()).expandDims(0),\n          r = t.model.predict(n).map(function (e) {\n        return e.squeeze([0]);\n      }),\n          o = t.nameOutputResults(r);\n      return {\n        heatmapScores: o.heatmap.sigmoid(),\n        offsets: o.offsets,\n        displacementFwd: o.displacementFwd,\n        displacementBwd: o.displacementBwd\n      };\n    });\n  }, e.prototype.dispose = function () {\n    this.model.dispose();\n  }, e;\n}(),\n    MobileNet = function (e) {\n  function t() {\n    return null !== e && e.apply(this, arguments) || this;\n  }\n\n  return __extends(t, e), t.prototype.preprocessInput = function (e) {\n    return tidy(function () {\n      return div(e, 127.5).sub(1);\n    });\n  }, t.prototype.nameOutputResults = function (e) {\n    return {\n      offsets: e[0],\n      heatmap: e[1],\n      displacementFwd: e[2],\n      displacementBwd: e[3]\n    };\n  }, t;\n}(BaseModel);\n\nfunction half(e) {\n  return Math.floor(e / 2);\n}\n\nvar MaxHeap = function () {\n  function e(e, t) {\n    this.priorityQueue = new Array(e), this.numberOfElements = -1, this.getElementValue = t;\n  }\n\n  return e.prototype.enqueue = function (e) {\n    this.priorityQueue[++this.numberOfElements] = e, this.swim(this.numberOfElements);\n  }, e.prototype.dequeue = function () {\n    var e = this.priorityQueue[0];\n    return this.exchange(0, this.numberOfElements--), this.sink(0), this.priorityQueue[this.numberOfElements + 1] = null, e;\n  }, e.prototype.empty = function () {\n    return -1 === this.numberOfElements;\n  }, e.prototype.size = function () {\n    return this.numberOfElements + 1;\n  }, e.prototype.all = function () {\n    return this.priorityQueue.slice(0, this.numberOfElements + 1);\n  }, e.prototype.max = function () {\n    return this.priorityQueue[0];\n  }, e.prototype.swim = function (e) {\n    for (; e > 0 && this.less(half(e), e);) this.exchange(e, half(e)), e = half(e);\n  }, e.prototype.sink = function (e) {\n    for (; 2 * e <= this.numberOfElements;) {\n      var t = 2 * e;\n      if (t < this.numberOfElements && this.less(t, t + 1) && t++, !this.less(e, t)) break;\n      this.exchange(e, t), e = t;\n    }\n  }, e.prototype.getValueAt = function (e) {\n    return this.getElementValue(this.priorityQueue[e]);\n  }, e.prototype.less = function (e, t) {\n    return this.getValueAt(e) < this.getValueAt(t);\n  }, e.prototype.exchange = function (e, t) {\n    var n = this.priorityQueue[e];\n    this.priorityQueue[e] = this.priorityQueue[t], this.priorityQueue[t] = n;\n  }, e;\n}();\n\nfunction scoreIsMaximumInLocalWindow(e, t, n, r, o, i) {\n  for (var s = i.shape, u = s[0], a = s[1], l = !0, p = Math.max(n - o, 0), c = Math.min(n + o + 1, u), f = p; f < c; ++f) {\n    for (var d = Math.max(r - o, 0), h = Math.min(r + o + 1, a), m = d; m < h; ++m) if (i.get(f, m, e) > t) {\n      l = !1;\n      break;\n    }\n\n    if (!l) break;\n  }\n\n  return l;\n}\n\nfunction buildPartWithScoreQueue(e, t, n) {\n  for (var r = n.shape, o = r[0], i = r[1], s = r[2], u = new MaxHeap(o * i * s, function (e) {\n    return e.score;\n  }), a = 0; a < o; ++a) for (var l = 0; l < i; ++l) for (var p = 0; p < s; ++p) {\n    var c = n.get(a, l, p);\n    c < e || scoreIsMaximumInLocalWindow(p, c, a, l, t, n) && u.enqueue({\n      score: c,\n      part: {\n        heatmapY: a,\n        heatmapX: l,\n        id: p\n      }\n    });\n  }\n\n  return u;\n}\n\nvar partNames = [\"nose\", \"leftEye\", \"rightEye\", \"leftEar\", \"rightEar\", \"leftShoulder\", \"rightShoulder\", \"leftElbow\", \"rightElbow\", \"leftWrist\", \"rightWrist\", \"leftHip\", \"rightHip\", \"leftKnee\", \"rightKnee\", \"leftAnkle\", \"rightAnkle\"],\n    NUM_KEYPOINTS = partNames.length,\n    partIds = partNames.reduce(function (e, t, n) {\n  return e[t] = n, e;\n}, {}),\n    connectedPartNames = [[\"leftHip\", \"leftShoulder\"], [\"leftElbow\", \"leftShoulder\"], [\"leftElbow\", \"leftWrist\"], [\"leftHip\", \"leftKnee\"], [\"leftKnee\", \"leftAnkle\"], [\"rightHip\", \"rightShoulder\"], [\"rightElbow\", \"rightShoulder\"], [\"rightElbow\", \"rightWrist\"], [\"rightHip\", \"rightKnee\"], [\"rightKnee\", \"rightAnkle\"], [\"leftShoulder\", \"rightShoulder\"], [\"leftHip\", \"rightHip\"]],\n    poseChain = [[\"nose\", \"leftEye\"], [\"leftEye\", \"leftEar\"], [\"nose\", \"rightEye\"], [\"rightEye\", \"rightEar\"], [\"nose\", \"leftShoulder\"], [\"leftShoulder\", \"leftElbow\"], [\"leftElbow\", \"leftWrist\"], [\"leftShoulder\", \"leftHip\"], [\"leftHip\", \"leftKnee\"], [\"leftKnee\", \"leftAnkle\"], [\"nose\", \"rightShoulder\"], [\"rightShoulder\", \"rightElbow\"], [\"rightElbow\", \"rightWrist\"], [\"rightShoulder\", \"rightHip\"], [\"rightHip\", \"rightKnee\"], [\"rightKnee\", \"rightAnkle\"]],\n    connectedPartIndices = connectedPartNames.map(function (e) {\n  var t = e[0],\n      n = e[1];\n  return [partIds[t], partIds[n]];\n}),\n    partChannels = [\"left_face\", \"right_face\", \"right_upper_leg_front\", \"right_lower_leg_back\", \"right_upper_leg_back\", \"left_lower_leg_front\", \"left_upper_leg_front\", \"left_upper_leg_back\", \"left_lower_leg_back\", \"right_feet\", \"right_lower_leg_front\", \"left_feet\", \"torso_front\", \"torso_back\", \"right_upper_arm_front\", \"right_upper_arm_back\", \"right_lower_arm_back\", \"left_lower_arm_front\", \"left_upper_arm_front\", \"left_upper_arm_back\", \"left_lower_arm_back\", \"right_hand\", \"right_lower_arm_front\", \"left_hand\"];\n\nfunction getOffsetPoint(e, t, n, r) {\n  return {\n    y: r.get(e, t, n),\n    x: r.get(e, t, n + NUM_KEYPOINTS)\n  };\n}\n\nfunction getImageCoords(e, t, n) {\n  var r = getOffsetPoint(e.heatmapY, e.heatmapX, e.id, n),\n      o = r.y,\n      i = r.x;\n  return {\n    x: e.heatmapX * t + i,\n    y: e.heatmapY * t + o\n  };\n}\n\nfunction clamp(e, t, n) {\n  return e < t ? t : e > n ? n : e;\n}\n\nfunction squaredDistance(e, t, n, r) {\n  var o = n - e,\n      i = r - t;\n  return o * o + i * i;\n}\n\nfunction addVectors(e, t) {\n  return {\n    x: e.x + t.x,\n    y: e.y + t.y\n  };\n}\n\nvar parentChildrenTuples = poseChain.map(function (e) {\n  var t = e[0],\n      n = e[1];\n  return [partIds[t], partIds[n]];\n}),\n    parentToChildEdges = parentChildrenTuples.map(function (e) {\n  return e[1];\n}),\n    childToParentEdges = parentChildrenTuples.map(function (e) {\n  return e[0];\n});\n\nfunction getDisplacement(e, t, n) {\n  var r = n.shape[2] / 2;\n  return {\n    y: n.get(t.y, t.x, e),\n    x: n.get(t.y, t.x, r + e)\n  };\n}\n\nfunction getStridedIndexNearPoint(e, t, n, r) {\n  return {\n    y: clamp(Math.round(e.y / t), 0, n - 1),\n    x: clamp(Math.round(e.x / t), 0, r - 1)\n  };\n}\n\nfunction traverseToTargetKeypoint(e, t, n, r, o, i, s, u) {\n  void 0 === u && (u = 2);\n\n  for (var a = r.shape, l = a[0], p = a[1], c = getDisplacement(e, getStridedIndexNearPoint(t.position, i, l, p), s), f = addVectors(t.position, c), d = 0; d < u; d++) {\n    var h = getStridedIndexNearPoint(f, i, l, p),\n        m = getOffsetPoint(h.y, h.x, n, o);\n    f = addVectors({\n      x: h.x * i,\n      y: h.y * i\n    }, {\n      x: m.x,\n      y: m.y\n    });\n  }\n\n  var g = getStridedIndexNearPoint(f, i, l, p),\n      _ = r.get(g.y, g.x, n);\n\n  return {\n    position: f,\n    part: partNames[n],\n    score: _\n  };\n}\n\nfunction decodePose(e, t, n, r, o, i) {\n  var s = t.shape[2],\n      u = parentToChildEdges.length,\n      a = new Array(s),\n      l = e.part,\n      p = e.score,\n      c = getImageCoords(l, r, n);\n  a[l.id] = {\n    score: p,\n    part: partNames[l.id],\n    position: c\n  };\n\n  for (var f = u - 1; f >= 0; --f) {\n    var d = parentToChildEdges[f],\n        h = childToParentEdges[f];\n    a[d] && !a[h] && (a[h] = traverseToTargetKeypoint(f, a[d], h, t, n, r, i));\n  }\n\n  for (f = 0; f < u; ++f) {\n    d = childToParentEdges[f], h = parentToChildEdges[f];\n    a[d] && !a[h] && (a[h] = traverseToTargetKeypoint(f, a[d], h, t, n, r, o));\n  }\n\n  return a;\n}\n\nfunction withinNmsRadiusOfCorrespondingPoint(e, t, n, r) {\n  var o = n.x,\n      i = n.y;\n  return e.some(function (e) {\n    var n = e.keypoints[r].position;\n    return squaredDistance(i, o, n.y, n.x) <= t;\n  });\n}\n\nfunction getInstanceScore(e, t, n) {\n  return n.reduce(function (n, r, o) {\n    var i = r.position,\n        s = r.score;\n    return withinNmsRadiusOfCorrespondingPoint(e, t, i, o) || (n += s), n;\n  }, 0) / n.length;\n}\n\nvar kLocalMaximumRadius = 1;\n\nfunction decodeMultiplePoses(e, t, n, r, o, i, s, u) {\n  void 0 === s && (s = .5), void 0 === u && (u = 20);\n\n  for (var a = [], l = buildPartWithScoreQueue(s, kLocalMaximumRadius, e), p = u * u; a.length < i && !l.empty();) {\n    var c = l.dequeue();\n\n    if (!withinNmsRadiusOfCorrespondingPoint(a, p, getImageCoords(c.part, o, t), c.part.id)) {\n      var f = decodePose(c, e, t, o, n, r),\n          d = getInstanceScore(a, p, f);\n      a.push({\n        keypoints: f,\n        score: d\n      });\n    }\n  }\n\n  return a;\n}\n\nfunction mod(e, t) {\n  return tidy(function () {\n    var n = e.div(scalar(t, \"int32\"));\n    return e.sub(n.mul(scalar(t, \"int32\")));\n  });\n}\n\nfunction argmax2d(e) {\n  var t = e.shape,\n      n = t[0],\n      r = t[1],\n      o = t[2];\n  return tidy(function () {\n    var t = e.reshape([n * r, o]).argMax(0),\n        i = t.div(scalar(r, \"int32\")).expandDims(1),\n        s = mod(t, r).expandDims(1);\n    return concat([i, s], 1);\n  });\n}\n\nfunction getPointsConfidence(e, t) {\n  for (var n = t.shape[0], r = new Float32Array(n), o = 0; o < n; o++) {\n    var i = t.get(o, 0),\n        s = t.get(o, 1);\n    r[o] = e.get(i, s, o);\n  }\n\n  return r;\n}\n\nfunction getOffsetPoint$1(e, t, n, r) {\n  return {\n    y: r.get(e, t, n),\n    x: r.get(e, t, n + NUM_KEYPOINTS)\n  };\n}\n\nfunction getOffsetVectors(e, t) {\n  for (var n = [], r = 0; r < NUM_KEYPOINTS; r++) {\n    var o = getOffsetPoint$1(e.get(r, 0).valueOf(), e.get(r, 1).valueOf(), r, t),\n        i = o.x,\n        s = o.y;\n    n.push(s), n.push(i);\n  }\n\n  return tensor2d(n, [NUM_KEYPOINTS, 2]);\n}\n\nfunction getOffsetPoints(e, t, n) {\n  return tidy(function () {\n    var r = getOffsetVectors(e, n);\n    return e.toTensor().mul(scalar(t, \"int32\")).toFloat().add(r);\n  });\n}\n\nfunction decodeSinglePose(e, t, n) {\n  return __awaiter(this, void 0, void 0, function () {\n    var r, o, i, s, u, a, l, p, c, f;\n    return __generator(this, function (d) {\n      switch (d.label) {\n        case 0:\n          return r = 0, o = argmax2d(e), [4, Promise.all([e.buffer(), t.buffer(), o.buffer()])];\n\n        case 1:\n          return i = d.sent(), s = i[0], u = i[1], a = i[2], [4, (l = getOffsetPoints(a, n, u)).buffer()];\n\n        case 2:\n          return p = d.sent(), c = Array.from(getPointsConfidence(s, a)), f = c.map(function (e, t) {\n            return r += e, {\n              position: {\n                y: p.get(t, 0),\n                x: p.get(t, 1)\n              },\n              part: partNames[t],\n              score: e\n            };\n          }), o.dispose(), l.dispose(), [2, {\n            keypoints: f,\n            score: r / f.length\n          }];\n      }\n    });\n  });\n}\n\nvar MOBILENET_BASE_URL = \"https://storage.googleapis.com/tfjs-models/savedmodel/posenet/mobilenet/\",\n    RESNET50_BASE_URL = \"https://storage.googleapis.com/tfjs-models/savedmodel/posenet/resnet50/\";\n\nfunction resNet50Checkpoint(e, t) {\n  var n = \"model-stride\" + e + \".json\";\n  return 4 === t ? RESNET50_BASE_URL + \"float/\" + n : RESNET50_BASE_URL + \"quant\" + t + \"/\" + n;\n}\n\nfunction mobileNetCheckpoint(e, t, n) {\n  var r = {\n    1: \"100\",\n    .75: \"075\",\n    .5: \"050\"\n  },\n      o = \"model-stride\" + e + \".json\";\n  return 4 === n ? MOBILENET_BASE_URL + \"float/\" + r[t] + \"/\" + o : MOBILENET_BASE_URL + \"quant\" + n + \"/\" + r[t] + \"/\" + o;\n}\n\nvar imageNetMean = [-123.15, -115.9, -103.06],\n    ResNet = function (e) {\n  function t() {\n    return null !== e && e.apply(this, arguments) || this;\n  }\n\n  return __extends(t, e), t.prototype.preprocessInput = function (e) {\n    return e.add(imageNetMean);\n  }, t.prototype.nameOutputResults = function (e) {\n    var t = e[0],\n        n = e[1];\n    return {\n      offsets: e[2],\n      heatmap: e[3],\n      displacementFwd: t,\n      displacementBwd: n\n    };\n  }, t;\n}(BaseModel);\n\nfunction eitherPointDoesntMeetConfidence(e, t, n) {\n  return e < n || t < n;\n}\n\nfunction getAdjacentKeyPoints(e, t) {\n  return connectedPartIndices.reduce(function (n, r) {\n    var o = r[0],\n        i = r[1];\n    return eitherPointDoesntMeetConfidence(e[o].score, e[i].score, t) ? n : (n.push([e[o], e[i]]), n);\n  }, []);\n}\n\nvar NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY,\n    POSITIVE_INFINITY = Number.POSITIVE_INFINITY;\n\nfunction getBoundingBox(e) {\n  return e.reduce(function (e, t) {\n    var n = e.maxX,\n        r = e.maxY,\n        o = e.minX,\n        i = e.minY,\n        s = t.position,\n        u = s.x,\n        a = s.y;\n    return {\n      maxX: Math.max(n, u),\n      maxY: Math.max(r, a),\n      minX: Math.min(o, u),\n      minY: Math.min(i, a)\n    };\n  }, {\n    maxX: NEGATIVE_INFINITY,\n    maxY: NEGATIVE_INFINITY,\n    minX: POSITIVE_INFINITY,\n    minY: POSITIVE_INFINITY\n  });\n}\n\nfunction getBoundingBoxPoints(e) {\n  var t = getBoundingBox(e),\n      n = t.minX,\n      r = t.minY,\n      o = t.maxX,\n      i = t.maxY;\n  return [{\n    x: n,\n    y: r\n  }, {\n    x: o,\n    y: r\n  }, {\n    x: o,\n    y: i\n  }, {\n    x: n,\n    y: i\n  }];\n}\n\nfunction toTensorBuffers3D(e) {\n  return __awaiter(this, void 0, void 0, function () {\n    return __generator(this, function (t) {\n      return [2, Promise.all(e.map(function (e) {\n        return e.buffer();\n      }))];\n    });\n  });\n}\n\nfunction scalePose(e, t, n, r, o) {\n  return void 0 === r && (r = 0), void 0 === o && (o = 0), {\n    score: e.score,\n    keypoints: e.keypoints.map(function (e) {\n      var i = e.score,\n          s = e.part,\n          u = e.position;\n      return {\n        score: i,\n        part: s,\n        position: {\n          x: u.x * n + o,\n          y: u.y * t + r\n        }\n      };\n    })\n  };\n}\n\nfunction scalePoses(e, t, n, r, o) {\n  return void 0 === r && (r = 0), void 0 === o && (o = 0), 1 === n && 1 === t && 0 === r && 0 === o ? e : e.map(function (e) {\n    return scalePose(e, t, n, r, o);\n  });\n}\n\nfunction flipPoseHorizontal(e, t) {\n  return {\n    score: e.score,\n    keypoints: e.keypoints.map(function (e) {\n      var n = e.score,\n          r = e.part,\n          o = e.position;\n      return {\n        score: n,\n        part: r,\n        position: {\n          x: t - 1 - o.x,\n          y: o.y\n        }\n      };\n    })\n  };\n}\n\nfunction flipPosesHorizontal(e, t) {\n  return t <= 0 ? e : e.map(function (e) {\n    return flipPoseHorizontal(e, t);\n  });\n}\n\nfunction toValidInputResolution(e, t) {\n  return isValidInputResolution(e, t) ? e : Math.floor(e / t) * t + 1;\n}\n\nfunction validateInputResolution(e) {\n  util.assert(\"number\" == typeof e || \"object\" == typeof e, function () {\n    return \"Invalid inputResolution \" + e + \". Should be a number or an object with width and height\";\n  }), \"object\" == typeof e && (util.assert(\"number\" == typeof e.width, function () {\n    return \"inputResolution.width has a value of \" + e.width + \" which is invalid; it must be a number\";\n  }), util.assert(\"number\" == typeof e.height, function () {\n    return \"inputResolution.height has a value of \" + e.height + \" which is invalid; it must be a number\";\n  }));\n}\n\nfunction getValidInputResolutionDimensions(e, t) {\n  return validateInputResolution(e), \"object\" == typeof e ? [toValidInputResolution(e.height, t), toValidInputResolution(e.width, t)] : [toValidInputResolution(e, t), toValidInputResolution(e, t)];\n}\n\nvar VALID_OUTPUT_STRIDES = [8, 16, 32];\n\nfunction assertValidOutputStride(e) {\n  util.assert(\"number\" == typeof e, function () {\n    return \"outputStride is not a number\";\n  }), util.assert(VALID_OUTPUT_STRIDES.indexOf(e) >= 0, function () {\n    return \"outputStride of \" + e + \" is invalid. It must be either 8, 16, or 32\";\n  });\n}\n\nfunction isValidInputResolution(e, t) {\n  return (e - 1) % t == 0;\n}\n\nfunction assertValidResolution(e, t) {\n  util.assert(\"number\" == typeof e[0] && \"number\" == typeof e[1], function () {\n    return \"both resolution values must be a number but had values \" + e;\n  }), util.assert(isValidInputResolution(e[0], t), function () {\n    return \"height of \" + e[0] + \" is invalid for output stride \" + t + \".\";\n  }), util.assert(isValidInputResolution(e[1], t), function () {\n    return \"width of \" + e[1] + \" is invalid for output stride \" + t + \".\";\n  });\n}\n\nfunction getInputTensorDimensions(e) {\n  return e instanceof Tensor ? [e.shape[0], e.shape[1]] : [e.height, e.width];\n}\n\nfunction toInputTensor(e) {\n  return e instanceof Tensor ? e : browser.fromPixels(e);\n}\n\nfunction padAndResizeTo(e, t) {\n  var n = t[0],\n      r = t[1],\n      o = getInputTensorDimensions(e),\n      i = o[0],\n      s = o[1],\n      u = r / n,\n      a = [0, 0, 0, 0],\n      l = a[0],\n      p = a[1],\n      c = a[2],\n      f = a[3];\n  return s / i < u ? (l = 0, p = 0, c = Math.round(.5 * (u * i - s)), f = Math.round(.5 * (u * i - s))) : (l = Math.round(.5 * (1 / u * s - i)), p = Math.round(.5 * (1 / u * s - i)), c = 0, f = 0), {\n    resized: tidy(function () {\n      var t = toInputTensor(e);\n      return (t = pad3d(t, [[l, p], [c, f], [0, 0]])).resizeBilinear([n, r]);\n    }),\n    padding: {\n      top: l,\n      left: c,\n      right: f,\n      bottom: p\n    }\n  };\n}\n\nfunction scaleAndFlipPoses(e, t, n, r, o) {\n  var i = t[0],\n      s = t[1],\n      u = n[0],\n      a = n[1],\n      l = scalePoses(e, (i + r.top + r.bottom) / u, (s + r.left + r.right) / a, -r.top, -r.left);\n  return o ? flipPosesHorizontal(l, s) : l;\n}\n\nvar MOBILENET_V1_CONFIG = {\n  architecture: \"MobileNetV1\",\n  outputStride: 16,\n  multiplier: .75,\n  inputResolution: 257\n},\n    VALID_ARCHITECTURE = [\"MobileNetV1\", \"ResNet50\"],\n    VALID_STRIDE = {\n  MobileNetV1: [8, 16, 32],\n  ResNet50: [32, 16]\n},\n    VALID_MULTIPLIER = {\n  MobileNetV1: [.5, .75, 1],\n  ResNet50: [1]\n},\n    VALID_QUANT_BYTES = [1, 2, 4];\n\nfunction validateModelConfig(e) {\n  if (null == (e = e || MOBILENET_V1_CONFIG).architecture && (e.architecture = \"MobileNetV1\"), VALID_ARCHITECTURE.indexOf(e.architecture) < 0) throw new Error(\"Invalid architecture \" + e.architecture + \". Should be one of \" + VALID_ARCHITECTURE);\n  if (null == e.inputResolution && (e.inputResolution = 257), validateInputResolution(e.inputResolution), null == e.outputStride && (e.outputStride = 16), VALID_STRIDE[e.architecture].indexOf(e.outputStride) < 0) throw new Error(\"Invalid outputStride \" + e.outputStride + \". Should be one of \" + VALID_STRIDE[e.architecture] + \" for architecutre \" + e.architecture + \".\");\n  if (null == e.multiplier && (e.multiplier = 1), VALID_MULTIPLIER[e.architecture].indexOf(e.multiplier) < 0) throw new Error(\"Invalid multiplier \" + e.multiplier + \". Should be one of \" + VALID_MULTIPLIER[e.architecture] + \" for architecutre \" + e.architecture + \".\");\n  if (null == e.quantBytes && (e.quantBytes = 4), VALID_QUANT_BYTES.indexOf(e.quantBytes) < 0) throw new Error(\"Invalid quantBytes \" + e.quantBytes + \". Should be one of \" + VALID_QUANT_BYTES + \" for architecutre \" + e.architecture + \".\");\n  return e;\n}\n\nvar SINGLE_PERSON_INFERENCE_CONFIG = {\n  flipHorizontal: !1\n},\n    MULTI_PERSON_INFERENCE_CONFIG = {\n  flipHorizontal: !1,\n  maxDetections: 5,\n  scoreThreshold: .5,\n  nmsRadius: 20\n};\n\nfunction validateMultiPersonInputConfig(e) {\n  var t = e.maxDetections,\n      n = e.scoreThreshold,\n      r = e.nmsRadius;\n  if (t <= 0) throw new Error(\"Invalid maxDetections \" + t + \". Should be > 0\");\n  if (n < 0 || n > 1) throw new Error(\"Invalid scoreThreshold \" + n + \". Should be in range [0.0, 1.0]\");\n  if (r <= 0) throw new Error(\"Invalid nmsRadius \" + r + \".\");\n}\n\nvar PoseNet = function () {\n  function e(e, t) {\n    assertValidOutputStride(e.outputStride), assertValidResolution(t, e.outputStride), this.baseModel = e, this.inputResolution = t;\n  }\n\n  return e.prototype.estimateMultiplePoses = function (e, t) {\n    return void 0 === t && (t = MULTI_PERSON_INFERENCE_CONFIG), __awaiter(this, void 0, void 0, function () {\n      var n, r, o, i, s, u, a, l, p, c, f, d, h, m, g, _, I, v, y, E, b;\n\n      return __generator(this, function (N) {\n        switch (N.label) {\n          case 0:\n            return n = __assign({}, MULTI_PERSON_INFERENCE_CONFIG, t), validateMultiPersonInputConfig(t), r = this.baseModel.outputStride, o = this.inputResolution, i = getInputTensorDimensions(e), s = i[0], u = i[1], a = padAndResizeTo(e, o), l = a.resized, p = a.padding, c = this.baseModel.predict(l), f = c.heatmapScores, d = c.offsets, h = c.displacementFwd, m = c.displacementBwd, [4, toTensorBuffers3D([f, d, h, m])];\n\n          case 1:\n            return g = N.sent(), _ = g[0], I = g[1], v = g[2], y = g[3], [4, decodeMultiplePoses(_, I, v, y, r, n.maxDetections, n.scoreThreshold, n.nmsRadius)];\n\n          case 2:\n            return E = N.sent(), b = scaleAndFlipPoses(E, [s, u], o, p, n.flipHorizontal), f.dispose(), d.dispose(), h.dispose(), m.dispose(), l.dispose(), [2, b];\n        }\n      });\n    });\n  }, e.prototype.estimateSinglePose = function (e, t) {\n    return void 0 === t && (t = SINGLE_PERSON_INFERENCE_CONFIG), __awaiter(this, void 0, void 0, function () {\n      var n, r, o, i, s, u, a, l, p, c, f, d, h, m, g, _;\n\n      return __generator(this, function (I) {\n        switch (I.label) {\n          case 0:\n            return n = __assign({}, SINGLE_PERSON_INFERENCE_CONFIG, t), r = this.baseModel.outputStride, o = this.inputResolution, i = getInputTensorDimensions(e), s = i[0], u = i[1], a = padAndResizeTo(e, o), l = a.resized, p = a.padding, c = this.baseModel.predict(l), f = c.heatmapScores, d = c.offsets, h = c.displacementFwd, m = c.displacementBwd, [4, decodeSinglePose(f, d, r)];\n\n          case 1:\n            return g = I.sent(), _ = scaleAndFlipPoses([g], [s, u], o, p, n.flipHorizontal), f.dispose(), d.dispose(), h.dispose(), m.dispose(), l.dispose(), [2, _[0]];\n        }\n      });\n    });\n  }, e.prototype.estimatePoses = function (e, t) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return \"single-person\" !== t.decodingMethod ? [3, 2] : [4, this.estimateSinglePose(e, t)];\n\n          case 1:\n            return [2, [n.sent()]];\n\n          case 2:\n            return [2, this.estimateMultiplePoses(e, t)];\n        }\n      });\n    });\n  }, e.prototype.dispose = function () {\n    this.baseModel.dispose();\n  }, e;\n}();\n\nfunction loadMobileNet(e) {\n  return __awaiter(this, void 0, void 0, function () {\n    var t, n, r, o, i, s, u;\n    return __generator(this, function (a) {\n      switch (a.label) {\n        case 0:\n          if (t = e.outputStride, n = e.quantBytes, r = e.multiplier, null == tf) throw new Error(\"Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this\\n        model.\");\n          return o = mobileNetCheckpoint(t, r, n), [4, loadGraphModel(e.modelUrl || o)];\n\n        case 1:\n          return i = a.sent(), s = new MobileNet(i, t), u = getValidInputResolutionDimensions(e.inputResolution, s.outputStride), [2, new PoseNet(s, u)];\n      }\n    });\n  });\n}\n\nfunction loadResNet(e) {\n  return __awaiter(this, void 0, void 0, function () {\n    var t, n, r, o, i, s;\n    return __generator(this, function (u) {\n      switch (u.label) {\n        case 0:\n          if (t = e.outputStride, n = e.quantBytes, null == tf) throw new Error(\"Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this\\n        model.\");\n          return r = resNet50Checkpoint(t, n), [4, loadGraphModel(e.modelUrl || r)];\n\n        case 1:\n          return o = u.sent(), i = new ResNet(o, t), s = getValidInputResolutionDimensions(e.inputResolution, i.outputStride), [2, new PoseNet(i, s)];\n      }\n    });\n  });\n}\n\nfunction load(e) {\n  return void 0 === e && (e = MOBILENET_V1_CONFIG), __awaiter(this, void 0, void 0, function () {\n    return __generator(this, function (t) {\n      return \"ResNet50\" === (e = validateModelConfig(e)).architecture ? [2, loadResNet(e)] : \"MobileNetV1\" === e.architecture ? [2, loadMobileNet(e)] : [2, null];\n    });\n  });\n}\n\nvar version = \"2.2.1\";\nexport { decodeMultiplePoses, decodeSinglePose, MobileNet, partChannels, partIds, partNames, poseChain, load, PoseNet, getAdjacentKeyPoints, getBoundingBox, getBoundingBoxPoints, scaleAndFlipPoses, scalePose, version };","map":{"version":3,"sources":["D:/Programming/VisualCode/Hackathon/doremi/node_modules/@tensorflow-models/posenet/dist/posenet.esm.js"],"names":["tf","tidy","div","util","Tensor","browser","pad3d","scalar","concat","tensor2d","loadGraphModel","extendStatics","e","t","Object","setPrototypeOf","__proto__","Array","n","hasOwnProperty","__extends","constructor","prototype","create","__assign","assign","r","arguments","length","o","call","apply","__awaiter","Promise","i","s","a","next","u","throw","done","value","then","__generator","label","sent","trys","ops","return","Symbol","iterator","TypeError","pop","push","BaseModel","model","outputStride","inputs","shape","assert","predict","preprocessInput","toFloat","expandDims","map","squeeze","nameOutputResults","heatmapScores","heatmap","sigmoid","offsets","displacementFwd","displacementBwd","dispose","MobileNet","sub","half","Math","floor","MaxHeap","priorityQueue","numberOfElements","getElementValue","enqueue","swim","dequeue","exchange","sink","empty","size","all","slice","max","less","getValueAt","scoreIsMaximumInLocalWindow","l","p","c","min","f","d","h","m","get","buildPartWithScoreQueue","score","part","heatmapY","heatmapX","id","partNames","NUM_KEYPOINTS","partIds","reduce","connectedPartNames","poseChain","connectedPartIndices","partChannels","getOffsetPoint","y","x","getImageCoords","clamp","squaredDistance","addVectors","parentChildrenTuples","parentToChildEdges","childToParentEdges","getDisplacement","getStridedIndexNearPoint","round","traverseToTargetKeypoint","position","g","_","decodePose","withinNmsRadiusOfCorrespondingPoint","some","keypoints","getInstanceScore","kLocalMaximumRadius","decodeMultiplePoses","mod","mul","argmax2d","reshape","argMax","getPointsConfidence","Float32Array","getOffsetPoint$1","getOffsetVectors","valueOf","getOffsetPoints","toTensor","add","decodeSinglePose","buffer","from","MOBILENET_BASE_URL","RESNET50_BASE_URL","resNet50Checkpoint","mobileNetCheckpoint","imageNetMean","ResNet","eitherPointDoesntMeetConfidence","getAdjacentKeyPoints","NEGATIVE_INFINITY","Number","POSITIVE_INFINITY","getBoundingBox","maxX","maxY","minX","minY","getBoundingBoxPoints","toTensorBuffers3D","scalePose","scalePoses","flipPoseHorizontal","flipPosesHorizontal","toValidInputResolution","isValidInputResolution","validateInputResolution","width","height","getValidInputResolutionDimensions","VALID_OUTPUT_STRIDES","assertValidOutputStride","indexOf","assertValidResolution","getInputTensorDimensions","toInputTensor","fromPixels","padAndResizeTo","resized","resizeBilinear","padding","top","left","right","bottom","scaleAndFlipPoses","MOBILENET_V1_CONFIG","architecture","multiplier","inputResolution","VALID_ARCHITECTURE","VALID_STRIDE","MobileNetV1","ResNet50","VALID_MULTIPLIER","VALID_QUANT_BYTES","validateModelConfig","Error","quantBytes","SINGLE_PERSON_INFERENCE_CONFIG","flipHorizontal","MULTI_PERSON_INFERENCE_CONFIG","maxDetections","scoreThreshold","nmsRadius","validateMultiPersonInputConfig","PoseNet","baseModel","estimateMultiplePoses","I","v","E","b","N","estimateSinglePose","estimatePoses","decodingMethod","loadMobileNet","modelUrl","loadResNet","load","version"],"mappings":"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","sourcesContent":["/**\r\n    * @license\r\n    * Copyright 2019 Google LLC. All Rights Reserved.\r\n    * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    * you may not use this file except in compliance with the License.\r\n    * You may obtain a copy of the License at\r\n    *\r\n    * http://www.apache.org/licenses/LICENSE-2.0\r\n    *\r\n    * Unless required by applicable law or agreed to in writing, software\r\n    * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    * See the License for the specific language governing permissions and\r\n    * limitations under the License.\r\n    * =============================================================================\r\n    */\r\nimport*as tf from\"@tensorflow/tfjs-core\";import{tidy,div,util,Tensor,browser,pad3d,scalar,concat,tensor2d}from\"@tensorflow/tfjs-core\";import{loadGraphModel}from\"@tensorflow/tfjs-converter\";var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __awaiter(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{a(r.next(e))}catch(e){i(e)}}function u(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,u)}a((r=r.apply(e,t||[])).next())})}function __generator(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var BaseModel=function(){function e(e,t){this.model=e,this.outputStride=t;var n=this.model.inputs[0].shape;util.assert(-1===n[1]&&-1===n[2],function(){return\"Input shape [\"+n[1]+\", \"+n[2]+\"] must both be equal to or -1\"})}return e.prototype.predict=function(e){var t=this;return tidy(function(){var n=t.preprocessInput(e.toFloat()).expandDims(0),r=t.model.predict(n).map(function(e){return e.squeeze([0])}),o=t.nameOutputResults(r);return{heatmapScores:o.heatmap.sigmoid(),offsets:o.offsets,displacementFwd:o.displacementFwd,displacementBwd:o.displacementBwd}})},e.prototype.dispose=function(){this.model.dispose()},e}(),MobileNet=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.preprocessInput=function(e){return tidy(function(){return div(e,127.5).sub(1)})},t.prototype.nameOutputResults=function(e){return{offsets:e[0],heatmap:e[1],displacementFwd:e[2],displacementBwd:e[3]}},t}(BaseModel);function half(e){return Math.floor(e/2)}var MaxHeap=function(){function e(e,t){this.priorityQueue=new Array(e),this.numberOfElements=-1,this.getElementValue=t}return e.prototype.enqueue=function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)},e.prototype.dequeue=function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e},e.prototype.empty=function(){return-1===this.numberOfElements},e.prototype.size=function(){return this.numberOfElements+1},e.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},e.prototype.max=function(){return this.priorityQueue[0]},e.prototype.swim=function(e){for(;e>0&&this.less(half(e),e);)this.exchange(e,half(e)),e=half(e)},e.prototype.sink=function(e){for(;2*e<=this.numberOfElements;){var t=2*e;if(t<this.numberOfElements&&this.less(t,t+1)&&t++,!this.less(e,t))break;this.exchange(e,t),e=t}},e.prototype.getValueAt=function(e){return this.getElementValue(this.priorityQueue[e])},e.prototype.less=function(e,t){return this.getValueAt(e)<this.getValueAt(t)},e.prototype.exchange=function(e,t){var n=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[t],this.priorityQueue[t]=n},e}();function scoreIsMaximumInLocalWindow(e,t,n,r,o,i){for(var s=i.shape,u=s[0],a=s[1],l=!0,p=Math.max(n-o,0),c=Math.min(n+o+1,u),f=p;f<c;++f){for(var d=Math.max(r-o,0),h=Math.min(r+o+1,a),m=d;m<h;++m)if(i.get(f,m,e)>t){l=!1;break}if(!l)break}return l}function buildPartWithScoreQueue(e,t,n){for(var r=n.shape,o=r[0],i=r[1],s=r[2],u=new MaxHeap(o*i*s,function(e){return e.score}),a=0;a<o;++a)for(var l=0;l<i;++l)for(var p=0;p<s;++p){var c=n.get(a,l,p);c<e||scoreIsMaximumInLocalWindow(p,c,a,l,t,n)&&u.enqueue({score:c,part:{heatmapY:a,heatmapX:l,id:p}})}return u}var partNames=[\"nose\",\"leftEye\",\"rightEye\",\"leftEar\",\"rightEar\",\"leftShoulder\",\"rightShoulder\",\"leftElbow\",\"rightElbow\",\"leftWrist\",\"rightWrist\",\"leftHip\",\"rightHip\",\"leftKnee\",\"rightKnee\",\"leftAnkle\",\"rightAnkle\"],NUM_KEYPOINTS=partNames.length,partIds=partNames.reduce(function(e,t,n){return e[t]=n,e},{}),connectedPartNames=[[\"leftHip\",\"leftShoulder\"],[\"leftElbow\",\"leftShoulder\"],[\"leftElbow\",\"leftWrist\"],[\"leftHip\",\"leftKnee\"],[\"leftKnee\",\"leftAnkle\"],[\"rightHip\",\"rightShoulder\"],[\"rightElbow\",\"rightShoulder\"],[\"rightElbow\",\"rightWrist\"],[\"rightHip\",\"rightKnee\"],[\"rightKnee\",\"rightAnkle\"],[\"leftShoulder\",\"rightShoulder\"],[\"leftHip\",\"rightHip\"]],poseChain=[[\"nose\",\"leftEye\"],[\"leftEye\",\"leftEar\"],[\"nose\",\"rightEye\"],[\"rightEye\",\"rightEar\"],[\"nose\",\"leftShoulder\"],[\"leftShoulder\",\"leftElbow\"],[\"leftElbow\",\"leftWrist\"],[\"leftShoulder\",\"leftHip\"],[\"leftHip\",\"leftKnee\"],[\"leftKnee\",\"leftAnkle\"],[\"nose\",\"rightShoulder\"],[\"rightShoulder\",\"rightElbow\"],[\"rightElbow\",\"rightWrist\"],[\"rightShoulder\",\"rightHip\"],[\"rightHip\",\"rightKnee\"],[\"rightKnee\",\"rightAnkle\"]],connectedPartIndices=connectedPartNames.map(function(e){var t=e[0],n=e[1];return[partIds[t],partIds[n]]}),partChannels=[\"left_face\",\"right_face\",\"right_upper_leg_front\",\"right_lower_leg_back\",\"right_upper_leg_back\",\"left_lower_leg_front\",\"left_upper_leg_front\",\"left_upper_leg_back\",\"left_lower_leg_back\",\"right_feet\",\"right_lower_leg_front\",\"left_feet\",\"torso_front\",\"torso_back\",\"right_upper_arm_front\",\"right_upper_arm_back\",\"right_lower_arm_back\",\"left_lower_arm_front\",\"left_upper_arm_front\",\"left_upper_arm_back\",\"left_lower_arm_back\",\"right_hand\",\"right_lower_arm_front\",\"left_hand\"];function getOffsetPoint(e,t,n,r){return{y:r.get(e,t,n),x:r.get(e,t,n+NUM_KEYPOINTS)}}function getImageCoords(e,t,n){var r=getOffsetPoint(e.heatmapY,e.heatmapX,e.id,n),o=r.y,i=r.x;return{x:e.heatmapX*t+i,y:e.heatmapY*t+o}}function clamp(e,t,n){return e<t?t:e>n?n:e}function squaredDistance(e,t,n,r){var o=n-e,i=r-t;return o*o+i*i}function addVectors(e,t){return{x:e.x+t.x,y:e.y+t.y}}var parentChildrenTuples=poseChain.map(function(e){var t=e[0],n=e[1];return[partIds[t],partIds[n]]}),parentToChildEdges=parentChildrenTuples.map(function(e){return e[1]}),childToParentEdges=parentChildrenTuples.map(function(e){return e[0]});function getDisplacement(e,t,n){var r=n.shape[2]/2;return{y:n.get(t.y,t.x,e),x:n.get(t.y,t.x,r+e)}}function getStridedIndexNearPoint(e,t,n,r){return{y:clamp(Math.round(e.y/t),0,n-1),x:clamp(Math.round(e.x/t),0,r-1)}}function traverseToTargetKeypoint(e,t,n,r,o,i,s,u){void 0===u&&(u=2);for(var a=r.shape,l=a[0],p=a[1],c=getDisplacement(e,getStridedIndexNearPoint(t.position,i,l,p),s),f=addVectors(t.position,c),d=0;d<u;d++){var h=getStridedIndexNearPoint(f,i,l,p),m=getOffsetPoint(h.y,h.x,n,o);f=addVectors({x:h.x*i,y:h.y*i},{x:m.x,y:m.y})}var g=getStridedIndexNearPoint(f,i,l,p),_=r.get(g.y,g.x,n);return{position:f,part:partNames[n],score:_}}function decodePose(e,t,n,r,o,i){var s=t.shape[2],u=parentToChildEdges.length,a=new Array(s),l=e.part,p=e.score,c=getImageCoords(l,r,n);a[l.id]={score:p,part:partNames[l.id],position:c};for(var f=u-1;f>=0;--f){var d=parentToChildEdges[f],h=childToParentEdges[f];a[d]&&!a[h]&&(a[h]=traverseToTargetKeypoint(f,a[d],h,t,n,r,i))}for(f=0;f<u;++f){d=childToParentEdges[f],h=parentToChildEdges[f];a[d]&&!a[h]&&(a[h]=traverseToTargetKeypoint(f,a[d],h,t,n,r,o))}return a}function withinNmsRadiusOfCorrespondingPoint(e,t,n,r){var o=n.x,i=n.y;return e.some(function(e){var n=e.keypoints[r].position;return squaredDistance(i,o,n.y,n.x)<=t})}function getInstanceScore(e,t,n){return n.reduce(function(n,r,o){var i=r.position,s=r.score;return withinNmsRadiusOfCorrespondingPoint(e,t,i,o)||(n+=s),n},0)/n.length}var kLocalMaximumRadius=1;function decodeMultiplePoses(e,t,n,r,o,i,s,u){void 0===s&&(s=.5),void 0===u&&(u=20);for(var a=[],l=buildPartWithScoreQueue(s,kLocalMaximumRadius,e),p=u*u;a.length<i&&!l.empty();){var c=l.dequeue();if(!withinNmsRadiusOfCorrespondingPoint(a,p,getImageCoords(c.part,o,t),c.part.id)){var f=decodePose(c,e,t,o,n,r),d=getInstanceScore(a,p,f);a.push({keypoints:f,score:d})}}return a}function mod(e,t){return tidy(function(){var n=e.div(scalar(t,\"int32\"));return e.sub(n.mul(scalar(t,\"int32\")))})}function argmax2d(e){var t=e.shape,n=t[0],r=t[1],o=t[2];return tidy(function(){var t=e.reshape([n*r,o]).argMax(0),i=t.div(scalar(r,\"int32\")).expandDims(1),s=mod(t,r).expandDims(1);return concat([i,s],1)})}function getPointsConfidence(e,t){for(var n=t.shape[0],r=new Float32Array(n),o=0;o<n;o++){var i=t.get(o,0),s=t.get(o,1);r[o]=e.get(i,s,o)}return r}function getOffsetPoint$1(e,t,n,r){return{y:r.get(e,t,n),x:r.get(e,t,n+NUM_KEYPOINTS)}}function getOffsetVectors(e,t){for(var n=[],r=0;r<NUM_KEYPOINTS;r++){var o=getOffsetPoint$1(e.get(r,0).valueOf(),e.get(r,1).valueOf(),r,t),i=o.x,s=o.y;n.push(s),n.push(i)}return tensor2d(n,[NUM_KEYPOINTS,2])}function getOffsetPoints(e,t,n){return tidy(function(){var r=getOffsetVectors(e,n);return e.toTensor().mul(scalar(t,\"int32\")).toFloat().add(r)})}function decodeSinglePose(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,o,i,s,u,a,l,p,c,f;return __generator(this,function(d){switch(d.label){case 0:return r=0,o=argmax2d(e),[4,Promise.all([e.buffer(),t.buffer(),o.buffer()])];case 1:return i=d.sent(),s=i[0],u=i[1],a=i[2],[4,(l=getOffsetPoints(a,n,u)).buffer()];case 2:return p=d.sent(),c=Array.from(getPointsConfidence(s,a)),f=c.map(function(e,t){return r+=e,{position:{y:p.get(t,0),x:p.get(t,1)},part:partNames[t],score:e}}),o.dispose(),l.dispose(),[2,{keypoints:f,score:r/f.length}]}})})}var MOBILENET_BASE_URL=\"https://storage.googleapis.com/tfjs-models/savedmodel/posenet/mobilenet/\",RESNET50_BASE_URL=\"https://storage.googleapis.com/tfjs-models/savedmodel/posenet/resnet50/\";function resNet50Checkpoint(e,t){var n=\"model-stride\"+e+\".json\";return 4===t?RESNET50_BASE_URL+\"float/\"+n:RESNET50_BASE_URL+\"quant\"+t+\"/\"+n}function mobileNetCheckpoint(e,t,n){var r={1:\"100\",.75:\"075\",.5:\"050\"},o=\"model-stride\"+e+\".json\";return 4===n?MOBILENET_BASE_URL+\"float/\"+r[t]+\"/\"+o:MOBILENET_BASE_URL+\"quant\"+n+\"/\"+r[t]+\"/\"+o}var imageNetMean=[-123.15,-115.9,-103.06],ResNet=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.preprocessInput=function(e){return e.add(imageNetMean)},t.prototype.nameOutputResults=function(e){var t=e[0],n=e[1];return{offsets:e[2],heatmap:e[3],displacementFwd:t,displacementBwd:n}},t}(BaseModel);function eitherPointDoesntMeetConfidence(e,t,n){return e<n||t<n}function getAdjacentKeyPoints(e,t){return connectedPartIndices.reduce(function(n,r){var o=r[0],i=r[1];return eitherPointDoesntMeetConfidence(e[o].score,e[i].score,t)?n:(n.push([e[o],e[i]]),n)},[])}var NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,POSITIVE_INFINITY=Number.POSITIVE_INFINITY;function getBoundingBox(e){return e.reduce(function(e,t){var n=e.maxX,r=e.maxY,o=e.minX,i=e.minY,s=t.position,u=s.x,a=s.y;return{maxX:Math.max(n,u),maxY:Math.max(r,a),minX:Math.min(o,u),minY:Math.min(i,a)}},{maxX:NEGATIVE_INFINITY,maxY:NEGATIVE_INFINITY,minX:POSITIVE_INFINITY,minY:POSITIVE_INFINITY})}function getBoundingBoxPoints(e){var t=getBoundingBox(e),n=t.minX,r=t.minY,o=t.maxX,i=t.maxY;return[{x:n,y:r},{x:o,y:r},{x:o,y:i},{x:n,y:i}]}function toTensorBuffers3D(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,Promise.all(e.map(function(e){return e.buffer()}))]})})}function scalePose(e,t,n,r,o){return void 0===r&&(r=0),void 0===o&&(o=0),{score:e.score,keypoints:e.keypoints.map(function(e){var i=e.score,s=e.part,u=e.position;return{score:i,part:s,position:{x:u.x*n+o,y:u.y*t+r}}})}}function scalePoses(e,t,n,r,o){return void 0===r&&(r=0),void 0===o&&(o=0),1===n&&1===t&&0===r&&0===o?e:e.map(function(e){return scalePose(e,t,n,r,o)})}function flipPoseHorizontal(e,t){return{score:e.score,keypoints:e.keypoints.map(function(e){var n=e.score,r=e.part,o=e.position;return{score:n,part:r,position:{x:t-1-o.x,y:o.y}}})}}function flipPosesHorizontal(e,t){return t<=0?e:e.map(function(e){return flipPoseHorizontal(e,t)})}function toValidInputResolution(e,t){return isValidInputResolution(e,t)?e:Math.floor(e/t)*t+1}function validateInputResolution(e){util.assert(\"number\"==typeof e||\"object\"==typeof e,function(){return\"Invalid inputResolution \"+e+\". Should be a number or an object with width and height\"}),\"object\"==typeof e&&(util.assert(\"number\"==typeof e.width,function(){return\"inputResolution.width has a value of \"+e.width+\" which is invalid; it must be a number\"}),util.assert(\"number\"==typeof e.height,function(){return\"inputResolution.height has a value of \"+e.height+\" which is invalid; it must be a number\"}))}function getValidInputResolutionDimensions(e,t){return validateInputResolution(e),\"object\"==typeof e?[toValidInputResolution(e.height,t),toValidInputResolution(e.width,t)]:[toValidInputResolution(e,t),toValidInputResolution(e,t)]}var VALID_OUTPUT_STRIDES=[8,16,32];function assertValidOutputStride(e){util.assert(\"number\"==typeof e,function(){return\"outputStride is not a number\"}),util.assert(VALID_OUTPUT_STRIDES.indexOf(e)>=0,function(){return\"outputStride of \"+e+\" is invalid. It must be either 8, 16, or 32\"})}function isValidInputResolution(e,t){return(e-1)%t==0}function assertValidResolution(e,t){util.assert(\"number\"==typeof e[0]&&\"number\"==typeof e[1],function(){return\"both resolution values must be a number but had values \"+e}),util.assert(isValidInputResolution(e[0],t),function(){return\"height of \"+e[0]+\" is invalid for output stride \"+t+\".\"}),util.assert(isValidInputResolution(e[1],t),function(){return\"width of \"+e[1]+\" is invalid for output stride \"+t+\".\"})}function getInputTensorDimensions(e){return e instanceof Tensor?[e.shape[0],e.shape[1]]:[e.height,e.width]}function toInputTensor(e){return e instanceof Tensor?e:browser.fromPixels(e)}function padAndResizeTo(e,t){var n=t[0],r=t[1],o=getInputTensorDimensions(e),i=o[0],s=o[1],u=r/n,a=[0,0,0,0],l=a[0],p=a[1],c=a[2],f=a[3];return s/i<u?(l=0,p=0,c=Math.round(.5*(u*i-s)),f=Math.round(.5*(u*i-s))):(l=Math.round(.5*(1/u*s-i)),p=Math.round(.5*(1/u*s-i)),c=0,f=0),{resized:tidy(function(){var t=toInputTensor(e);return(t=pad3d(t,[[l,p],[c,f],[0,0]])).resizeBilinear([n,r])}),padding:{top:l,left:c,right:f,bottom:p}}}function scaleAndFlipPoses(e,t,n,r,o){var i=t[0],s=t[1],u=n[0],a=n[1],l=scalePoses(e,(i+r.top+r.bottom)/u,(s+r.left+r.right)/a,-r.top,-r.left);return o?flipPosesHorizontal(l,s):l}var MOBILENET_V1_CONFIG={architecture:\"MobileNetV1\",outputStride:16,multiplier:.75,inputResolution:257},VALID_ARCHITECTURE=[\"MobileNetV1\",\"ResNet50\"],VALID_STRIDE={MobileNetV1:[8,16,32],ResNet50:[32,16]},VALID_MULTIPLIER={MobileNetV1:[.5,.75,1],ResNet50:[1]},VALID_QUANT_BYTES=[1,2,4];function validateModelConfig(e){if(null==(e=e||MOBILENET_V1_CONFIG).architecture&&(e.architecture=\"MobileNetV1\"),VALID_ARCHITECTURE.indexOf(e.architecture)<0)throw new Error(\"Invalid architecture \"+e.architecture+\". Should be one of \"+VALID_ARCHITECTURE);if(null==e.inputResolution&&(e.inputResolution=257),validateInputResolution(e.inputResolution),null==e.outputStride&&(e.outputStride=16),VALID_STRIDE[e.architecture].indexOf(e.outputStride)<0)throw new Error(\"Invalid outputStride \"+e.outputStride+\". Should be one of \"+VALID_STRIDE[e.architecture]+\" for architecutre \"+e.architecture+\".\");if(null==e.multiplier&&(e.multiplier=1),VALID_MULTIPLIER[e.architecture].indexOf(e.multiplier)<0)throw new Error(\"Invalid multiplier \"+e.multiplier+\". Should be one of \"+VALID_MULTIPLIER[e.architecture]+\" for architecutre \"+e.architecture+\".\");if(null==e.quantBytes&&(e.quantBytes=4),VALID_QUANT_BYTES.indexOf(e.quantBytes)<0)throw new Error(\"Invalid quantBytes \"+e.quantBytes+\". Should be one of \"+VALID_QUANT_BYTES+\" for architecutre \"+e.architecture+\".\");return e}var SINGLE_PERSON_INFERENCE_CONFIG={flipHorizontal:!1},MULTI_PERSON_INFERENCE_CONFIG={flipHorizontal:!1,maxDetections:5,scoreThreshold:.5,nmsRadius:20};function validateMultiPersonInputConfig(e){var t=e.maxDetections,n=e.scoreThreshold,r=e.nmsRadius;if(t<=0)throw new Error(\"Invalid maxDetections \"+t+\". Should be > 0\");if(n<0||n>1)throw new Error(\"Invalid scoreThreshold \"+n+\". Should be in range [0.0, 1.0]\");if(r<=0)throw new Error(\"Invalid nmsRadius \"+r+\".\")}var PoseNet=function(){function e(e,t){assertValidOutputStride(e.outputStride),assertValidResolution(t,e.outputStride),this.baseModel=e,this.inputResolution=t}return e.prototype.estimateMultiplePoses=function(e,t){return void 0===t&&(t=MULTI_PERSON_INFERENCE_CONFIG),__awaiter(this,void 0,void 0,function(){var n,r,o,i,s,u,a,l,p,c,f,d,h,m,g,_,I,v,y,E,b;return __generator(this,function(N){switch(N.label){case 0:return n=__assign({},MULTI_PERSON_INFERENCE_CONFIG,t),validateMultiPersonInputConfig(t),r=this.baseModel.outputStride,o=this.inputResolution,i=getInputTensorDimensions(e),s=i[0],u=i[1],a=padAndResizeTo(e,o),l=a.resized,p=a.padding,c=this.baseModel.predict(l),f=c.heatmapScores,d=c.offsets,h=c.displacementFwd,m=c.displacementBwd,[4,toTensorBuffers3D([f,d,h,m])];case 1:return g=N.sent(),_=g[0],I=g[1],v=g[2],y=g[3],[4,decodeMultiplePoses(_,I,v,y,r,n.maxDetections,n.scoreThreshold,n.nmsRadius)];case 2:return E=N.sent(),b=scaleAndFlipPoses(E,[s,u],o,p,n.flipHorizontal),f.dispose(),d.dispose(),h.dispose(),m.dispose(),l.dispose(),[2,b]}})})},e.prototype.estimateSinglePose=function(e,t){return void 0===t&&(t=SINGLE_PERSON_INFERENCE_CONFIG),__awaiter(this,void 0,void 0,function(){var n,r,o,i,s,u,a,l,p,c,f,d,h,m,g,_;return __generator(this,function(I){switch(I.label){case 0:return n=__assign({},SINGLE_PERSON_INFERENCE_CONFIG,t),r=this.baseModel.outputStride,o=this.inputResolution,i=getInputTensorDimensions(e),s=i[0],u=i[1],a=padAndResizeTo(e,o),l=a.resized,p=a.padding,c=this.baseModel.predict(l),f=c.heatmapScores,d=c.offsets,h=c.displacementFwd,m=c.displacementBwd,[4,decodeSinglePose(f,d,r)];case 1:return g=I.sent(),_=scaleAndFlipPoses([g],[s,u],o,p,n.flipHorizontal),f.dispose(),d.dispose(),h.dispose(),m.dispose(),l.dispose(),[2,_[0]]}})})},e.prototype.estimatePoses=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return\"single-person\"!==t.decodingMethod?[3,2]:[4,this.estimateSinglePose(e,t)];case 1:return[2,[n.sent()]];case 2:return[2,this.estimateMultiplePoses(e,t)]}})})},e.prototype.dispose=function(){this.baseModel.dispose()},e}();function loadMobileNet(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,o,i,s,u;return __generator(this,function(a){switch(a.label){case 0:if(t=e.outputStride,n=e.quantBytes,r=e.multiplier,null==tf)throw new Error(\"Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this\\n        model.\");return o=mobileNetCheckpoint(t,r,n),[4,loadGraphModel(e.modelUrl||o)];case 1:return i=a.sent(),s=new MobileNet(i,t),u=getValidInputResolutionDimensions(e.inputResolution,s.outputStride),[2,new PoseNet(s,u)]}})})}function loadResNet(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,o,i,s;return __generator(this,function(u){switch(u.label){case 0:if(t=e.outputStride,n=e.quantBytes,null==tf)throw new Error(\"Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this\\n        model.\");return r=resNet50Checkpoint(t,n),[4,loadGraphModel(e.modelUrl||r)];case 1:return o=u.sent(),i=new ResNet(o,t),s=getValidInputResolutionDimensions(e.inputResolution,i.outputStride),[2,new PoseNet(i,s)]}})})}function load(e){return void 0===e&&(e=MOBILENET_V1_CONFIG),__awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return\"ResNet50\"===(e=validateModelConfig(e)).architecture?[2,loadResNet(e)]:\"MobileNetV1\"===e.architecture?[2,loadMobileNet(e)]:[2,null]})})}var version=\"2.2.1\";export{decodeMultiplePoses,decodeSinglePose,MobileNet,partChannels,partIds,partNames,poseChain,load,PoseNet,getAdjacentKeyPoints,getBoundingBox,getBoundingBoxPoints,scaleAndFlipPoses,scalePose,version};\r\n"]},"metadata":{},"sourceType":"module"}